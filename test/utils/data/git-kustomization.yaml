---
apiVersion: source.toolkit.fluxcd.io/v1beta2
kind: GitRepository
metadata:
  name: {{.GitRepoName}}
  namespace: {{.NameSpace}}
spec:
  interval: 30s
  ref:
    branch: master
  url: {{.GitRepoURL}}

---
apiVersion: kustomize.toolkit.fluxcd.io/v1beta2
kind: Kustomization
metadata:
  name: {{.KustomizationName}}
  namespace: {{.NameSpace}}
  annotations:
    metadata.weave.works/description: |
      Podinfo is a tiny web application made with Go that showcases best practices of running microservices in Kubernetes.
      Podinfo is used by CNCF projects like Flux and Flagger for end-to-end testing and workshops.
    metadata.weave.works/grafana-dashboard: https://grafana.com/
    metadata.weave.works/javascript-alert: "javascript:alert('hello there');"
spec:
  interval: 30s
  path: ./kustomize
  prune: true
  sourceRef:
    kind: GitRepository
    name: {{.GitRepoName}}
  targetNamespace: {{.TargetNamespace}}

